// Test configuration for FDRBENCH_ENTRAPMENT module
// Override default parameters for testing with test data

params {
    // Output directory for test results
    outdir = "results/fdrbench_test"
    publish_dir_mode = "copy"
    save_intermediates = true
    save_logs = true
    
    // FDRBench parameters
    fdrbench {
        enabled = true
        
        // Entrapment generation settings
        level = "protein"           // 'peptide' or 'protein' level entrapment
        i2l = true                  // Convert I to L for matching
        diann_compatible = true     // Generate DIA-NN compatible format
        uniprot_format = true       // Parse UniProt-style FASTA headers
        
        // Enzyme settings (should match search engine settings)
        enzyme = 2                  // 0:Non-specific, 1:Trypsin, 2:Trypsin (no P)
        missed_cleavages = 1        // Max missed cleavages
        min_length = 7              // Min peptide length
        max_length = 30             // Max peptide length
        
        // Entrapment method
        fold = 1                    // Number of entrapment folds (1 = 1:1 ratio)
        method = 0                  // 0:shuffle, 1:swap
        entrapment_label = "_p_target"  // Label for entrapment sequences
        entrapment_pos = 1          // 0:start, 1:end
        
        // Quality control options
        check_duplicates = true     // Check for duplicates
        no_shared_peptides = false  // Allow shared peptides
        add_decoy = false           // Don't add decoys (search engine handles this)
        clip_n_m = false            // Don't clip N-terminal M
        swap_order = false          // Don't reverse order
        fix_nc = "c"                // Fix C terminal
        pick = "first"              // Protein selection method
        
        // Reproducibility - use fixed seed for testing
        fix_seed = true
        seed = 42
        
        // Multi-species entrapment (not used in this test)
        foreign_species = null
    }
}

// Use Docker profile for testing
docker {
    enabled = true
}

process {
    container = 'ghcr.io/openswath/openswath:dev'
    
    withName: 'FDRBENCH_ENTRAPMENT' {
        cpus = 2
        memory = '4 GB'
    }
}
